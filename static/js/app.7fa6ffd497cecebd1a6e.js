webpackJsonp([1],{JBwG:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r=n("n6Cl"),a=(n("Viya"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",[t("h1",[this._v("창체동아리 신청")]),this._v(" "),t("hr",{staticStyle:{"margin-bottom":"50px"},attrs:{width:"100%"}}),this._v(" "),t("router-view")],1)])},staticRenderFns:[]});var s=n("VU/8")({name:"app"},a,!1,function(e){n("JBwG")},null,null).exports,u=n("/ocq"),o=n("Xxa5"),l=n.n(o),p=n("exGp"),d=n.n(p),c=n("//Fk"),m=n.n(c),h=n("mtWM"),v=n.n(h),f={name:"Application",data:function(){return{num:null,name:null,group:null,groupList:null,errorText:null,sending:!1}},computed:{numHelperText:function(){return"string"==typeof this.num&&this.num.length?isNaN(this.num)?"학번을 올바르게 입력하세요.":5!==this.num.length?"학번을 5자리로 입력하세요.":"":"학번을 입력하세요."},nameHelperText:function(){return"string"==typeof this.name&&this.name.length?2!==this.name.length&&3!==this.name.length?"이름을 올바르게 입력하세요.":"":"이름을 입력하세요."},numValid:function(){return""===this.numHelperText},nameValid:function(){return""===this.nameHelperText}},methods:{getGroupsList:function(){var e,t=this;return new m.a((e=d()(l.a.mark(function e(n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new m.a(function(e){setTimeout(function(){return e()},2e3)});case 2:n([{id:0,name:"국어 동아리",available:10},{id:1,name:"수학 동아리",available:5},{id:2,name:"정보 동아리",available:0}]);case 3:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},send:function(){var e=this;if(this.errorText="",this.sending=!0,!this.numValid)return this.errorText=this.numHelperText,void(this.sending=!1);if(!this.nameValid)return this.errorText=this.nameHelperText,void(this.sending=!1);if(null===this.groupList)return this.errorText="잠시 후 시도해주세요.\n동아리 목록을 불러오고 있습니다...",void(this.sending=!1);var t=this.groupList.filter(function(t){return t.id===parseInt(e.group)});if(!t.length)return this.errorText="신청할 동아리를 선택하세요.",void(this.sending=!1);(t=t.shift()).available?v.a.post("https://group.dnhs.me/api/application/",{num:this.num,name:this.name,group:parseInt(this.group)},{responseType:"json",timeout:1e4,timeoutErrorMessage:"timeout"}).then(function(t){e.sending=!1}).catch(function(t){e.sending=!1,"timeout"===t.message&&(e.errorText="timeout")}):this.errorText="선택한 동아리는 신청이 마감되었습니다."}},created:function(){var e=this;this.getGroupsList().then(function(t){e.groupList=t})}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",[n("b",[e._v("학번을 입력하세요. (예시: 10101)")]),n("br"),e._v(" "),n("mdc-textfield",{attrs:{label:"학번",outline:"",required:"",helptext:e.numHelperText,"helptext-validation":"",valid:e.numValid},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1),e._v(" "),n("div",[n("b",[e._v("이름을 입력하세요.")]),n("br"),e._v(" "),n("mdc-textfield",{staticStyle:{margin:"0"},attrs:{label:"이름",outline:"",required:"",helptext:e.nameHelperText,"helptext-validation":"",valid:e.nameValid},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("div",[n("b",{staticStyle:{"margin-bottom":"20px",display:"block"}},[e._v("동아리를 선택하세요.")]),e._v(" "),null===e.groupList?n("mdc-linear-progress",{attrs:{indeterminate:""}}):e._l(e.groupList?e.groupList:[],function(t){return n("div",[n("mdc-radio",{key:t.id,attrs:{name:"groups",value:String(t.id),label:t.name+", "+(t.available?t.available+"명 남음":"마감됨"),disabled:!t.available},model:{value:e.group,callback:function(t){e.group=t},expression:"group"}}),e._v(" "),n("br")],1)})],2),e._v(" "),n("div",[n("p",{staticStyle:{color:"red"}},[e._v(e._s(e.errorText))]),e._v(" "),e.sending?n("mdc-button",{attrs:{unelevated:"",disabled:""}},[e._v("신청 중...")]):n("mdc-button",{attrs:{unelevated:""},on:{click:e.send}},[e._v("신청")])],1)])},staticRenderFns:[]};var x=n("VU/8")(f,g,!1,function(e){n("orAc")},"data-v-7ede202d",null).exports;i.a.use(u.a);var b=new u.a({routes:[{path:"/",name:"Application",component:x}]});i.a.config.productionTip=!1,i.a.use(r.a),new i.a({el:"#app",router:b,template:"<App/>",components:{App:s}})},Viya:function(e,t){},orAc:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7fa6ffd497cecebd1a6e.js.map