webpackJsonp([1],{JBwG:function(t,e){},Jf6r:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r=n("n6Cl"),a=(n("Viya"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",[e("h1",[this._v("창체동아리 신청")]),this._v(" "),e("hr",{staticStyle:{"margin-bottom":"50px"},attrs:{width:"100%"}}),this._v(" "),e("router-view")],1)])},staticRenderFns:[]});var s=n("VU/8")({name:"app"},a,!1,function(t){n("JBwG")},null,null).exports,o=n("/ocq"),u=n("Xxa5"),l=n.n(u),d=n("exGp"),c=n.n(d),p=n("//Fk"),v=n.n(p),m=n("mtWM"),h=n.n(m),f={name:"Application",data:function(){return{num:null,name:null,group:null,groupList:null,errorText:null,sending:!1,success:!1}},computed:{numHelperText:function(){return"string"==typeof this.num&&this.num.length?isNaN(this.num)?"학번을 올바르게 입력하세요.":5!==this.num.length?"학번을 5자리로 입력하세요.":"":"학번을 입력하세요."},nameHelperText:function(){return"string"==typeof this.name&&this.name.length?2!==this.name.length&&3!==this.name.length?"이름을 올바르게 입력하세요.":"":"이름을 입력하세요."},numValid:function(){return""===this.numHelperText},nameValid:function(){return""===this.nameHelperText}},methods:{getGroupsList:function(){var t,e=this;return new v.a((t=c()(l.a.mark(function t(n){var i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new v.a(function(t){setTimeout(function(){return t()},2e3)});case 2:return i=void 0,t.prev=3,t.next=6,h.a.post("https://group.dnhs.me/api/groups",{},{responseType:"json"});case 6:i=t.sent.data,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(i);case 12:if(0===i.status){t.next=16;break}return alert("동아리 리스트를 불러오지 못했습니다.\n새로고침합니다."),location.reload(),t.abrupt("return");case 16:n(i.result);case 17:case"end":return t.stop()}},t,e,[[3,9]])})),function(e){return t.apply(this,arguments)}))},send:function(){var t=this;if(this.errorText="",this.sending=!0,!this.numValid)return this.errorText=this.numHelperText,void(this.sending=!1);if(!this.nameValid)return this.errorText=this.nameHelperText,void(this.sending=!1);if(null===this.groupList)return this.errorText="잠시 후 시도해주세요.\n동아리 목록을 불러오고 있습니다...",void(this.sending=!1);var e=this.groupList.filter(function(e){return e.id===parseInt(t.group)});return e.length?(e=e.shift()).available?void h.a.post("https://group.dnhs.me/api/application/",{num:this.num,name:this.name,group:parseInt(this.group)},{responseType:"json",timeout:1e4,timeoutErrorMessage:"timeout"}).then(function(e){t.sending=!1,void 0!==e.data.groups&&(t.groupList=e.data.groups),0===e.data.status?t.success=!0:t.errorText=void 0===e.data.message?"code: "+e.data.status:e.data.message}).catch(function(e){t.sending=!1,"timeout"===e.message&&(t.errorText="timeout")}):(this.errorText="선택한 동아리는 신청이 마감되었습니다.",void(this.sending=!1)):(this.errorText="신청할 동아리를 선택하세요.",void(this.sending=!1))}},created:function(){var t=this;this.getGroupsList().then(function(e){t.groupList=e})}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.success?n("div",[n("h4",[t._v("신청이 완료되었습니다.")])]):n("div",[n("div",[n("b",[t._v("학번을 입력하세요. (예시: 10101)")]),n("br"),t._v(" "),n("mdc-textfield",{attrs:{label:"학번",outline:"",required:"",helptext:t.numHelperText,"helptext-validation":"",valid:t.numValid},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1),t._v(" "),n("div",[n("b",[t._v("이름을 입력하세요.")]),n("br"),t._v(" "),n("mdc-textfield",{staticStyle:{margin:"0"},attrs:{label:"이름",outline:"",required:"",helptext:t.nameHelperText,"helptext-validation":"",valid:t.nameValid},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),n("div",[n("b",{staticStyle:{"margin-bottom":"20px",display:"block"}},[t._v("동아리를 선택하세요.")]),t._v(" "),null===t.groupList?n("mdc-linear-progress",{attrs:{indeterminate:""}}):t._l(t.groupList?t.groupList:[],function(e){return n("div",[n("mdc-radio",{key:e.id,attrs:{name:"groups",value:String(e.id),label:e.name+", "+(e.available?e.available+"명 남음":"마감됨"),disabled:!e.available},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}}),t._v(" "),n("br")],1)})],2),t._v(" "),n("div",[n("p",{staticStyle:{color:"red"}},[t._v(t._s(t.errorText))]),t._v(" "),t.sending?n("mdc-button",{attrs:{unelevated:"",disabled:""}},[t._v("신청 중...")]):n("mdc-button",{attrs:{unelevated:""},on:{click:t.send}},[t._v("신청")])],1)])])},staticRenderFns:[]};var _=n("VU/8")(f,g,!1,function(t){n("pTk6")},"data-v-e285af9a",null).exports,x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",[n("h2",[t._v("페이지를 찾을 수 없습니다.")]),t._v(" "),n("h5",{on:{click:function(e){return t.$router.push({name:"Application"})}}},[t._v("신청 페이지로 가기 >")])])])},staticRenderFns:[]};var b=n("VU/8")({name:"NotFound"},x,!1,function(t){n("Jf6r")},"data-v-53d84030",null).exports,w={name:"Admin",data:function(){return{id:null,pw:null,sending:!1,errorText:null}},computed:{isLogin:function(){return this.$store.getters.isLogin},data:function(){return this.$store.getters.data}},methods:{login:function(){var t=this;return c()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.sending=!0,t.errorText=null,e.next=4,t.$store.dispatch("login",{id:t.id,pw:t.pw});case 4:t.sending=!1,t.isLogin||(t.errorText="아이디나 비밀번호가 틀렸습니다.");case 6:case"end":return e.stop()}},e,t)}))()}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"center",width:"100%"}},[t.isLogin?n("div",{staticClass:"container"},[n("div",{staticClass:"register"},[n("h3",[t._v("동아리 목록")]),t._v(" "),n("table",{staticStyle:{"table-layout":"auto"}},[t._m(1),t._v(" "),n("tbody",t._l(t.data.groups,function(e){return n("tr",[n("td",{staticStyle:{width:"30%"}},[t._v(t._s(e.name))]),t._v(" "),n("td",{staticStyle:{width:"30%"}},[t._v(t._s(e.available>0?e.available+"명 남음":"마감됨"))]),t._v(" "),n("td",{staticStyle:{width:"40%",padding:"0"}},[n("table",{staticStyle:{"border-collapse":"collapse"}},[n("tbody",t._l(void 0===e.students?[]:e.students,function(e){return n("tr",[n("td",[t._v(t._s(e.num))]),t._v(" "),n("td",[t._v(t._s(e.name))])])}),0)])])])}),0)])]),t._v(" "),n("div",{staticClass:"unregister"},[n("h3",[t._v("미신청자 목록 ("+t._s(t.data.unregisterStudent.length)+"명)")]),t._v(" "),n("table",[t._m(2),t._v(" "),n("tbody",t._l(t.data.unregisterStudent,function(e){return n("tr",[n("td",[t._v(t._s(e[0]))]),t._v(" "),n("td",[t._v(t._s(e[1]))])])}),0)])])]):n("div",[t._m(0),t._v(" "),n("div",{staticStyle:{"margin-bottom":"10px"}},[n("mdc-textfield",{attrs:{label:"아이디",outline:"",required:""},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}})],1),t._v(" "),n("div",{staticStyle:{"margin-bottom":"25px"}},[n("mdc-textfield",{attrs:{label:"비밀번호",outline:"",required:"",type:"password"},model:{value:t.pw,callback:function(e){t.pw=e},expression:"pw"}})],1),t._v(" "),n("div",[n("p",{staticStyle:{color:"red","margin-bottom":"30px"}},[t._v(t._s(t.errorText))]),t._v(" "),t.sending?n("mdc-button",{attrs:{unelevated:"",disabled:""}},[t._v("로그인 중...")]):n("mdc-button",{attrs:{unelevated:""},on:{click:t.login}},[t._v("로그인")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"margin-bottom":"10px"}},[e("h3",[this._v("관리자 페이지 로그인")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("td",{staticStyle:{width:"30%"}},[this._v("동아리 이름")]),this._v(" "),e("td",{staticStyle:{width:"30%"}},[this._v("모집 현황")]),this._v(" "),e("td",{staticStyle:{width:"40%"}},[this._v("학생 목록")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("td",[this._v("학번")]),this._v(" "),e("td",[this._v("이름")])])])}]};var T=n("VU/8")(w,y,!1,function(t){n("wcVv")},"data-v-6fffcdd9",null).exports;i.a.use(o.a);var S=new o.a({mode:"history",routes:[{path:"/",name:"Application",component:_},{path:"/admin",name:"Admin",component:T},{path:"/*",name:"404",component:b}]}),k=n("NYxO");i.a.use(k.a);var L=new k.a.Store({state:{id:null,pw:null,isLogin:!1,response:{}},mutations:{setAuthState:function(t,e){var n=e.id,i=e.pw,r=e.isLogin,a=e.response;t.id=n,t.pw=i,t.isLogin=r,t.response=a}},actions:{login:function(t,e){var n=this,i=t.commit,r=e.id,a=e.pw;return c()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=void 0,t.prev=1,t.next=4,h.a.post("https://group.dnhs.me/api/admin",{id:r,pw:a},{responseType:"json"});case 4:e=t.sent.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e=t.t0.response.data;case 10:return t.prev=10,i("setAuthState",{id:r,pw:a,isLogin:0===e.status,response:e.result}),t.finish(10);case 13:case"end":return t.stop()}},t,n,[[1,7,10,13]])}))()}},getters:{isLogin:function(t){return t.isLogin},data:function(t){return t.response}},modules:{}});i.a.config.productionTip=!1,i.a.use(r.a),new i.a({el:"#app",router:S,store:L,template:"<App/>",components:{App:s}})},Viya:function(t,e){},pTk6:function(t,e){},wcVv:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.3d9f391670e631d8a606.js.map