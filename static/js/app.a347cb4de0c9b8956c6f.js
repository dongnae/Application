webpackJsonp([1],{JBwG:function(t,e){},Jf6r:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r=n("n6Cl"),a=(n("Viya"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",[e("h1",[this._v("창체동아리 신청")]),this._v(" "),e("hr",{staticStyle:{"margin-bottom":"50px"},attrs:{width:"100%"}}),this._v(" "),e("router-view")],1)])},staticRenderFns:[]});var s=n("VU/8")({name:"app"},a,!1,function(t){n("JBwG")},null,null).exports,o=n("/ocq"),u=n("Xxa5"),l=n.n(u),c=n("exGp"),d=n.n(c),p=n("//Fk"),m=n.n(p),h=n("mtWM"),v=n.n(h),f={name:"Application",data:function(){return{num:null,name:null,group:null,groupList:null,errorText:null,sending:!1,success:!1}},computed:{numHelperText:function(){return"string"==typeof this.num&&this.num.length?isNaN(this.num)?"학번을 올바르게 입력하세요.":5!==this.num.length?"학번을 5자리로 입력하세요.":"":"학번을 입력하세요."},nameHelperText:function(){return"string"==typeof this.name&&this.name.length?2!==this.name.length&&3!==this.name.length?"이름을 올바르게 입력하세요.":"":"이름을 입력하세요."},numValid:function(){return""===this.numHelperText},nameValid:function(){return""===this.nameHelperText}},methods:{getGroupsList:function(){var t,e=this;return new m.a((t=d()(l.a.mark(function t(n){var i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new m.a(function(t){setTimeout(function(){return t()},2e3)});case 2:return t.next=4,v.a.post("https://group.dnhs.me/api/groups",{},{responseType:"json"});case 4:if(0===(i=t.sent.data).status){t.next=9;break}return alert("동아리 리스트를 불러오지 못했습니다.\n새로고침합니다."),location.reload(),t.abrupt("return");case 9:n(i.result);case 10:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},send:function(){var t=this;if(this.errorText="",this.sending=!0,!this.numValid)return this.errorText=this.numHelperText,void(this.sending=!1);if(!this.nameValid)return this.errorText=this.nameHelperText,void(this.sending=!1);if(null===this.groupList)return this.errorText="잠시 후 시도해주세요.\n동아리 목록을 불러오고 있습니다...",void(this.sending=!1);var e=this.groupList.filter(function(e){return e.id===parseInt(t.group)});return e.length?(e=e.shift()).available?void v.a.post("https://group.dnhs.me/api/application/",{num:this.num,name:this.name,group:parseInt(this.group)},{responseType:"json",timeout:1e4,timeoutErrorMessage:"timeout"}).then(function(e){t.sending=!1,void 0!==e.data.groups&&(t.groupList=e.data.groups),0===e.data.status?t.success=!0:t.errorText=void 0===e.data.message?"code: "+e.data.status:e.data.message}).catch(function(e){t.sending=!1,"timeout"===e.message&&(t.errorText="timeout")}):(this.errorText="선택한 동아리는 신청이 마감되었습니다.",void(this.sending=!1)):(this.errorText="신청할 동아리를 선택하세요.",void(this.sending=!1))}},created:function(){var t=this;this.getGroupsList().then(function(e){t.groupList=e})}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.success?n("div",[n("h4",[t._v("신청이 완료되었습니다.")])]):n("div",[n("div",[n("b",[t._v("학번을 입력하세요. (예시: 10101)")]),n("br"),t._v(" "),n("mdc-textfield",{attrs:{label:"학번",outline:"",required:"",helptext:t.numHelperText,"helptext-validation":"",valid:t.numValid},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1),t._v(" "),n("div",[n("b",[t._v("이름을 입력하세요.")]),n("br"),t._v(" "),n("mdc-textfield",{staticStyle:{margin:"0"},attrs:{label:"이름",outline:"",required:"",helptext:t.nameHelperText,"helptext-validation":"",valid:t.nameValid},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),n("div",[n("b",{staticStyle:{"margin-bottom":"20px",display:"block"}},[t._v("동아리를 선택하세요.")]),t._v(" "),null===t.groupList?n("mdc-linear-progress",{attrs:{indeterminate:""}}):t._l(t.groupList?t.groupList:[],function(e){return n("div",[n("mdc-radio",{key:e.id,attrs:{name:"groups",value:String(e.id),label:e.name+", "+(e.available?e.available+"명 남음":"마감됨"),disabled:!e.available},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}}),t._v(" "),n("br")],1)})],2),t._v(" "),n("div",[n("p",{staticStyle:{color:"red"}},[t._v(t._s(t.errorText))]),t._v(" "),t.sending?n("mdc-button",{attrs:{unelevated:"",disabled:""}},[t._v("신청 중...")]):n("mdc-button",{attrs:{unelevated:""},on:{click:t.send}},[t._v("신청")])],1)])])},staticRenderFns:[]};var x=n("VU/8")(f,g,!1,function(t){n("oFco")},"data-v-5333e4e8",null).exports,_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",[n("h2",[t._v("페이지를 찾을 수 없습니다.")]),t._v(" "),n("h5",{on:{click:function(e){return t.$router.push({name:"Application"})}}},[t._v("신청 페이지로 가기 >")])])])},staticRenderFns:[]};var b=n("VU/8")({name:"NotFound"},_,!1,function(t){n("Jf6r")},"data-v-53d84030",null).exports;i.a.use(o.a);var T=new o.a({mode:"history",routes:[{path:"/",name:"Application",component:x},{path:"/*",name:"404",component:b}]});i.a.config.productionTip=!1,i.a.use(r.a),new i.a({el:"#app",router:T,template:"<App/>",components:{App:s}})},Viya:function(t,e){},oFco:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a347cb4de0c9b8956c6f.js.map